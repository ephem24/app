{
  "name": "Next.js & Python Full-Stack Codespace",
  "image": "mcr.microsoft.com/devcontainers/universal:latest",
  
  "forwardPorts": [3000, 5000, 5050, 6380],
  "portsAttributes": {
    "3000": { "label": "Next.js Frontend", "onAutoForward": "openBrowser" },
    "5000": { "label": "Primary Python API" },
    "5050": { "label": "Secondary Python Service" },
    "6380": { "label": "Redis Cache (Custom Port)", "onAutoForward": "notify" }
  },

  // âœ… THE FIX: This runs in your visible terminal AFTER you connect.
  // Since manual typing works, this will work.
  "postAttachCommand": "git submodule update --init --recursive",
  
  "customizations": {
    "codespaces": {
      "repositories": {
        "ephem24/ai-tutor-module": {
          "permissions": {
            "contents": "write" 
          }
        },
        "ephem24/app-prototype": {
          "permissions": {
            "contents": "write"
          }
        }
      }
    }
  }
}
